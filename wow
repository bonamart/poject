Swal.fire({
    title: 'Are you sure?',
    text: 'Do you want to proceed?',
    icon: 'question',
    showCancelButton: true,
    confirmButtonText: 'Submit Appointment',
    cancelButtonText: 'Save as Draft'
}).then((result) => {
    appointmentData.requestStatus = result.isConfirmed ? 1 : 0; // Tambahkan ini
    console.log("Final Data Sent:", JSON.stringify(appointmentData, null, 2)); // Debugging

    sendRequest(apiurl + "/" + modname, "POST", appointmentData)
        .then(response => {
            if (response.status === 'success') {
                let successMsg = result.isConfirmed ? 'Booking berhasil dibuat!' : 'Saved as Draft';
                Swal.fire({ icon: 'success', title: successMsg, text: 'Appointment has been saved.' });
                e.component._dataSource.reload();
            } else {
                Swal.fire({ icon: 'error', title: 'Error', text: response.message });
            }
        })
        .catch(error => {
            Swal.fire({ icon: 'error', title: 'Error', text: error.responseText });
        });
});
