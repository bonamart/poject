// Mapping warna berdasarkan requestStatus
$statusColors = [
    1 => '#FFC107', // Pending (kuning)
    2 => '#28A745', // Approved (hijau)
    3 => '#DC3545', // Rejected (merah)
    4 => '#007BFF', // Completed (biru)
];

// Mapping room data dengan lokasi dan request status terbaru
$roomsWithLocations = $rooms->map(function ($room) use ($locations, $booking, $statusColors) {
    $location = $locations->firstWhere('id', $room->location_id);

    // Cari semua request yang sesuai dengan room_id
    $requests = $booking->where('ghm_room_id', $room->id);

    // Ambil request terbaru berdasarkan `startDate`, jika ada
    $latestRequest = $requests->sortByDesc('startDate')->first();

    // Ambil status dari request terbaru, jika tidak ada set default ke 0
    $requestStatus = $latestRequest->requestStatus ?? 0;

    return [
        'text' => $room->roomName,
        'id' => $room->id,
        'requestStatus' => $requestStatus,
        'roomAccupancy' => $room->roomAccupancy ?? 0,
        'location' => $location->Location ?? null,
        'color' => $statusColors[$requestStatus] ?? '#6C757D', // Default abu-abu jika status tidak cocok
    ];
});

// Debugging: Periksa hasil akhir apakah warna sudah benar
dd($roomsWithLocations);


resourceCellTemplate: function(cellData) {
    console.log("Color:", cellData.data.color); // Debugging di Console Browser

    const container = $('<div>')
        .addClass('resource-cell')
        .text(cellData.text)
        .css({
            backgroundColor: cellData.data.color,
            color: '#fff', // Agar teks tetap terlihat
            padding: '10px',
            borderRadius: '5px',
            textAlign: 'center'
        });

    return container;
}
