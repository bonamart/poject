function deserializeFromJSON(jsonString) {
    try {
        // Check if the input is a string and not empty
        if (typeof jsonString === 'string' && jsonString.trim() !== '') {
            const parsedData = JSON.parse(jsonString);
            return parsedData;
        } else {
            console.warn('Invalid JSON string:', jsonString);
            return []; // or return null, depending on your use case
        }
    } catch (error) {
        console.error('Failed to parse JSON:', error);
        return []; // or return null, depending on your use case
    }
}


onAppointmentFormOpening: function(e) {
    const form = e.form;
    const appointmentData = e.appointmentData;

    console.log('Appointment Data:', appointmentData); // Debug log

    if (appointmentData.employee_id && typeof appointmentData.employee_id === 'string') {
        appointmentData.employee_id = deserializeFromJSON(appointmentData.employee_id);
    }
    if (appointmentData.guest && typeof appointmentData.guest === 'string') {
        appointmentData.guest = deserializeFromJSON(appointmentData.guest);
    } else if (!appointmentData.guest) {
        appointmentData.guest = []; // Initialize with empty array if `guest` is `null` or `undefined`
    }
    if (appointmentData.family && typeof appointmentData.family === 'string') {
        appointmentData.family = deserializeFromJSON(appointmentData.family);
    } else if (!appointmentData.family) {
        appointmentData.family = []; // Initialize with empty array if `family` is `null` or `undefined`
    }

    // Rest of your code...
}



console.log('Employee ID:', appointmentData.employee_id);
console.log('Guest:', appointmentData.guest);
console.log('Family:', appointmentData.family);
